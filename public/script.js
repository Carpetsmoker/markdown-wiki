// Generated by CoffeeScript 1.7.1
(function() {
  document.body.addEventListener('submit', function(e) {
    var c;
    if (e.target.className === 'remove-page') {
      c = confirm('Remove this page?');
      if (!c) {
        return e.preventDefault();
      }
    } else if (e.target.className === 'remove-dir') {
      c = confirm('Remove this directory?');
      if (!c) {
        return e.preventDefault();
      }
    }
  });

  document.body.addEventListener('click', function(e) {
    var preview;
    if (e.target.id === 'show-preview') {
      e.preventDefault();
      preview = document.getElementById('wmd-preview');
      if (preview.offsetWidth === 0) {
        preview.style.display = 'block';
        document.getElementById('page').style.display = 'none';
        return e.target.innerHTML = 'Disable preview';
      } else {
        preview.style.display = 'none';
        document.getElementById('page').style.display = 'block';
        return e.target.innerHTML = 'Enable preview';
      }
    } else if (e.target.id === 'mv-page') {
      e.preventDefault();
      return document.getElementsByClassName('mv-page')[0].style.display = 'inline-block';
    }
  });

  document.addEventListener('DOMContentLoaded', function() {
    var drag, handle, original, start, textarea;
    textarea = document.getElementsByTagName('textarea')[0];
    if (textarea == null) {
      return;
    }
    drag = false;
    handle = document.getElementsByClassName('resize-handle')[0];
    start = 0;
    original = textarea.clientHeight;
    textarea.style.resize = 'none';
    handle.addEventListener('mousedown', function(e) {
      drag = true;
      start = e.clientY;
      original = textarea.clientHeight;
      document.body.focus();
      return e.preventDefault();
    });
    document.body.addEventListener('mousemove', function(e) {
      if (!drag) {
        return;
      }
      return textarea.style.height = "" + (original + e.clientY - start - 13) + "px";
    });
    return document.body.addEventListener('mouseup', function(e) {
      return drag = false;
    });
  });

  document.addEventListener('DOMContentLoaded', function() {
    var poll, req, timer;
    req = null;
    timer = null;
    poll = function() {
      var loc;
      if (req != null) {
        return;
      }
      loc = window.location.href;
      if (loc.substr(-9) !== '.markdown' && loc.substr(-3) !== '.md') {
        clearInterval(timer);
      }
    };
    return timer = setInterval(poll, 3000);
  });

}).call(this);
